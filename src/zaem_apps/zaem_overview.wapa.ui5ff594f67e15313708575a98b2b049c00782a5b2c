sap.ui.define([                                                                                                                                                                                                                                                
    "../model/formatter",                                                                                                                                                                                                                                      
    "sap/ui/core/mvc/Controller",                                                                                                                                                                                                                              
     "sap/m/MessageToast"                                                                                                                                                                                                                                      
], (                                                                                                                                                                                                                                                           
    formatter,                                                                                                                                                                                                                                                 
    Controller,                                                                                                                                                                                                                                                
    MessageToast                                                                                                                                                                                                                                               
) => {                                                                                                                                                                                                                                                         
    "use strict";                                                                                                                                                                                                                                              
                                                                                                                                                                                                                                                               
    return Controller.extend("s5aemoverview.controller.AemOverview", {                                                                                                                                                                                         
        formatter: formatter,                                                                                                                                                                                                                                  
                                                                                                                                                                                                                                                               
        onInit() {                                                                                                                                                                                                                                             
            ["phase1List", "phase2List", "phase3List"].forEach(function (sId) {                                                                                                                                                                                
                this.byId(sId).attachUpdateFinished(this._applyClasses, this);                                                                                                                                                                                 
            }, this);                                                                                                                                                                                                                                          
        },                                                                                                                                                                                                                                                     
        _applyClasses: function (oEvent) {                                                                                                                                                                                                                     
            var oList = oEvent.getSource();                                                                                                                                                                                                                    
            oList.getItems().forEach(function (oItem) {                                                                                                                                                                                                        
                var oCtx = oItem.getBindingContext("ext");                                                                                                                                                                                                     
                if (!oCtx) { return; }                                                                                                                                                                                                                         
                var sCls = oCtx.getProperty("class");                                                                                                                                                                                                          
                var oTile = oItem.getContent()[0];                                                                                                                                                                                                             
                oTile.removeStyleClass("catActions").removeStyleClass("catLogic").removeStyleClass("catSystem").removeStyleClass("catRequiredData");                                                                                                           
                oTile.addStyleClass(sCls);                                                                                                                                                                                                                     
            });                                                                                                                                                                                                                                                
        },                                                                                                                                                                                                                                                     
        press: function (oEvent) {                                                                                                                                                                                                                             
            var oCtx = oEvent.getSource().getBindingContext("ext");                                                                                                                                                                                            
            var sHeader = oCtx ? oCtx.getProperty("header") : "";                                                                                                                                                                                              
            MessageToast.show(sHeader);                                                                                                                                                                                                                        
          }                                                                                                                                                                                                                                                    
    });                                                                                                                                                                                                                                                        
});                                                                                                                                                                                                                                                            
                                                                                                                                                                                                                                                               